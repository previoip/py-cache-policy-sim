30a31,35
> # ======= PATCH NOTE =======
> # ========= GLOBAL =========
> # override class config ref into
> # weakref form from parent class
> # ===== PATCH NOTE END =====
32c37
< def convert_df(user_num, item_num, df):
---
> def convert_df(self, user_num, item_num, df):
37,38c42,47
<     rows = list(df['user'])
<     cols = list(df['item'])
---
> 
>     # ======= PATCH NOTE =======
>     # fix: invalid col key value
>     rows = list(df[self.df_uid])
>     cols = list(df[self.df_iid])
>     # ===== PATCH NOTE END =====
403,404c412,413
<         self.user_num = config['user_num']
<         self.item_num = config['item_num']
---
>         self.user_num = self.wref_config['user_num']
>         self.item_num = self.wref_config['item_num']
406,409c415,418
<         self.k = config['maxk']
<         self.shrink = config['shrink']
<         self.normalize = config['normalize']
<         self.similarity = config['similarity']
---
>         self.k = self.wref_config['maxk']
>         self.shrink = self.wref_config['shrink']
>         self.normalize = self.wref_config['normalize']
>         self.similarity = self.wref_config['similarity']
411c420
<         self.topk = config['topk']
---
>         self.topk = self.wref_config['topk']
416c425
<         train = convert_df(self.user_num, self.item_num, train_set)
---
>         train = convert_df(self, self.user_num, self.item_num, train_set)
437a447,452
>         # ======= PATCH NOTE =======
>         # early return if self.pred_mat is null
>         if self.pred_mat is None:
>             return None
>         # ===== PATCH NOTE END =====
> 
442a458,463
>         # ======= PATCH NOTE =======
>         # early return if self.pred_mat is null
>         if self.pred_mat is None:
>             return []
>         # ===== PATCH NOTE END =====
> 
454a476,482
> 
>         # ======= PATCH NOTE =======
>         # early return if self.pred_mat is null
>         if self.pred_mat is None:
>             return []
>         # ===== PATCH NOTE END =====
> 
482,483c510,511
<         self.user_num = config['user_num']
<         self.item_num = config['item_num']
---
>         self.user_num = self.wref_config['user_num']
>         self.item_num = self.wref_config['item_num']
485,489c513,517
<         self.k = config['maxk']
<         self.shrink = config['shrink']
<         self.normalize = config['normalize']
<         self.similarity = config['similarity']
<         self.topk = config['topk']
---
>         self.k = self.wref_config['maxk']
>         self.shrink = self.wref_config['shrink']
>         self.normalize = self.wref_config['normalize']
>         self.similarity = self.wref_config['similarity']
>         self.topk = self.wref_config['topk']
494c522
<         train = convert_df(self.user_num, self.item_num, train_set)
---
>         train = convert_df(self, self.user_num, self.item_num, train_set)
515a544,549
>         # ======= PATCH NOTE =======
>         # early return if self.pred_mat is null
>         if self.pred_mat is None:
>             return None
>         # ===== PATCH NOTE END =====
> 
520a555,560
>         # ======= PATCH NOTE =======
>         # early return if self.pred_mat is null
>         if self.pred_mat is None:
>             return []
>         # ===== PATCH NOTE END =====
> 
532a573,579
> 
>         # ======= PATCH NOTE =======
>         # early return if self.pred_mat is null
>         if self.pred_mat is None:
>             return []
>         # ===== PATCH NOTE END =====
> 
